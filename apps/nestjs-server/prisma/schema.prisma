
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id              String         @id @default(cuid())
  email           String         @unique
  full_name       String         @unique
  bio             String?
  avatar          String?
  cover_photo     String?        @default("")
  website_link    String?        @default("")
  phone_number    String?
  auth_provider   String         @default("google")
  created_at      DateTime       @default(now())
  updated_at      DateTime       @updatedAt

  bank_account    BankAccount?
  bank_account_id String?        @unique
  refresh_tokens  RefreshToken[]

  @@index([full_name, email])
}


model RefreshToken {
  id         String   @id @default(cuid())
  token      String   @unique
  user_id    String
  user       User     @relation(fields: [user_id], references: [id], onDelete: Cascade)
  created_at DateTime @default(now())
  expires_at DateTime?

  @@index([user_id])
}

model BankAccount {
  id                     String   @id @default(cuid())
  encrypted_bank_account String
  user_id                String?  @unique
  user                   User?    @relation(fields: [user_id], references: [id], onDelete: SetNull)
  updated_at             DateTime @updatedAt

  @@index([user_id])
}
